% Load the kaobook class
\documentclass[
  french,english,
	fontsize=10pt, % Base font size
	twoside=true, % Use different layouts for even and odd pages (in particular, if twoside=true, the margin column will be always on the outside)
	%open=any, % If twoside=true, uncomment this to force new chapters to start on any page, not only on right (odd) pages
	secnumdepth=1, % How deep to number headings. Defaults to 1 (sections)
]{kaobook/kaobook}

\setcounter{tocdepth}{\sectiontocdepth}

% Choose the language
\usepackage{babel} % Load characters and hyphenation
\usepackage[english=british]{csquotes}	% English quotes

% Load packages for testing
\usepackage{blindtext}
%\usepackage{showframe} % Uncomment to show boxes around the text area, margin, header and footer
%\usepackage{showlabels} % Uncomment to output the content of \label commands to the document where they are used

% Load the bibliography package
\usepackage[style=alphabetic,maxbibnames=99]{kaobook/kaobiblio}
% \DeclareFieldFormat*{title}{\mkbibemph{#1}}
\addbibresource{biblio.bib} % Bibliography file

% Load mathematical packages for theorems and related environments
\usepackage{kaobook/kaotheorems}

% Load the package for hyperreferences
\usepackage{kaobook/kaorefs}

% Load my own packages
\usepackage{styles/layout}
\usepackage{styles/macros}

\graphicspath{{./figures/}} % Paths where images are looked for

\makeindex[columns=3, title=Alphabetical Index, intoc] % Make LaTeX produce the files required to compile the index

%\includeonly{technical-intro}

\input{knowledge_declarations.tex}

\begin{document}

\include{header}

%----------------------------------------------------------------------------------------
%	MAIN BODY
%----------------------------------------------------------------------------------------

\mainmatter % Denotes the start of the main document content, resets page numbering and uses arabic numbers
\setchapterstyle{kao} % Choose the default chapter heading style

\addchap{How to read this thesis}

\selectlanguage{french}

\include{intro-fr}

\selectlanguage{english}

\include{intro-en}

\include{technical-intro}

\pagelayout{wide} % No margins
\addpart{Bidirectional typing for dependent types}
\label{part:bidir}
\pagelayout{margin} % Restore margins

\chapter{Warmup: CCω}
\label{chap:bidir-ccw}

This could probably be taken quite literally from ITP21?

\chapter{The real thing: extension to fancy CIC}
\label{chap:bidir-cic}

Same, all hail ITP21

\chapter{Bidirectional conversion, Abel style}
\label{chap:bidir-conv}

Does this belong in this part, or in a self-standing part at the end?
It would make little sense to come back to this after formalisation + gradual typing,
but at the same time having it so early is a bit odd.

\pagelayout{wide} % No margins
\addpart{Formalizing a kernel for Coq}
\label{part:metacoq}
\pagelayout{margin} % Restore margins

\chapter{The MetaCoq project}
\label{chap:metacoq-general}

Probably have to write something new, a form of digest of JACM/CoqCoqCorrect/… maybe? Also depends whether we let this one out before the manuscript, I guess.

\chapter{Proving the kernel correct}
\label{chap:kernel-correctness}

Longer description of what I did there, mixup between ITP and JACM.

\pagelayout{wide} % No margins
\addpart{Bidirectional Elaboration for Gradual Typing}
\label{part:gradual}
\pagelayout{margin} % Restore margins

\chapter{Gradual Typing Meet Dependent Types}
\label{chap:gradual-dependent}

Take inspiration from first sections of TOPLAS paper here.

\chapter{From GCIC to CastCIC: Bidirectional Elaboration}
\label{chap:bidir-gradual-elab}

Again, should be an adaptation from TOPLAS. Maybe I can do a bit more, especially if
I concentrate on the bidirectional way of things. For instance, I could try and give a better algorithm for deciding conversion than the crappy one from the paper.

\appendix % From here onwards, chapters are numbered with letters, as is the appendix convention

\pagelayout{wide} % No margins
\addpart{Appendix}
\pagelayout{margin} % Restore margins

\chapter{Some more blindtext}

\blindtext

%----------------------------------------------------------------------------------------

\backmatter % Denotes the end of the main document content
\setchapterstyle{plain} % Output plain chapters from this point onwards

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

% The bibliography needs to be compiled with biber using your LaTeX editor, or on the command line with 'biber main' from the template directory

\defbibnote{bibnote}{Here are the references in citation order.\par\bigskip} % Prepend this text to the bibliography
\printbibliography[heading=bibintoc, title=Bibliography, prenote=bibnote] % Add the bibliography heading to the ToC, set the title of the bibliography and output the bibliography note

%----------------------------------------------------------------------------------------
%	INDEX
%----------------------------------------------------------------------------------------

% The index needs to be compiled on the command line with 'makeindex main' from the template directory

\printindex % Output the index

\end{document}
